# Как пользоваться ботом


Добавляем бота в беседу и делаем его администратором. Без этого бот работать не будет.


Далее нужно, чтобы бот зарегистрировал вашу беседу. Для этого в чате пишем команду:

    /reg on

В ответ бот сообщит ID беседы. Этот номер нужен, чтобы давать команды боту в личных сообщениях.
После регистрации ботом можно пользоваться.


# Команды
Команды доступны только владельцу беседы. Исключение составляет команда `/post`, которая доступна всем участникам беседы.

## /reg - регистрация.
*Командами /reg можно пользоваться только в беседе. Остальными командами можно пользоваться и в беседе, и в личной переписке с ботом.*

**1.Узнать ID чата:**

    /reg info
    
**2.Отменить регистрацию (бот работать не будет):**

    /reg off
    
**3.Зарегистрировать чат (после отмены регистрации тоже):**

    /reg on
    
***    
## /post - рандомные посты.

По команде `/post` бот пришлет в чат случайный пост со стены выбранной вами группы. Группа при этом не должна быть частной или закрытой.

**1.Выбрать группу можно командой `/post group`.** После команды `/post group` нужно подставить

   * ссылку на группу
   * или её ID
   * или screen_name(короткое имя).
   
Примеры:

     /post group https://vk.com/link_to_the_group
     /post group 12345678
     /post group link_to_the_group

*Если группа с таким адресом не существует или является закрытой, бот об этом сообщит.
Поменять уже выбранную группу можно этой же командой.*

**2.Разрешить случайные посты командой /post on**:

После того как вы выбрали группу и сохранили её в настройках, нужно дать боту разрешение отправлять в чат случайные посты по команде `/post`. Делается это командой

    /post on
  
**3.Попросить бота прислать какой-нибудь пост со стены выбранной вами группы**:

    /post

*Этой командой могут пользоваться все участники беседы, не только её владелец.*

**4.Запретить команду /post**:

    /post off
Сохраненная группа останется в настройках, но команду `/post` бот будет игнорировать. Разрешить боту снова отправлять случайные посты можно командой `/post on`

**5.Удалить из настроек группу для команды /post**:

    /post group delete
Команда `/post` будет отключена.

**6. Посмотреть свои настройки для команды /post**:

    /post info
Бот пришлет информацию о сохраненной группе для команды `/post`.
***
## /kick - удалять участников беседы.
По команде `/kick` бот удалит участников беседы, которые не являются участниками выбранной вами группы. Группа при этом не должна быть частной или закрытой.
*Бот не удаляет из группы админов и других ботов. Команда доступна только для владельца беседы.*

**1.Выбрать группу**:

    /kick group https://vk.com/link_to_the_group
После команды `/kick group` нужно подставить

* ссылку на группу
* или её ID
* или screen_name(короткое имя).

*Если группа с таким адресом не существует или является закрытой, бот об этом сообщит.
Поменять уже выбранную группу можно этой же командой.*

**2. Включить команду /kick командой /kick on**:

После того как вы выбрали группу и сохранили её в настройках, нужно дать боту разрешение удалять участников чата по команде `/kick`. Делается это командой

    /kick on
**3. Удалить из беседы людей, которые не состоят в выбранной вами группе**:

    /kick
**4. Отключить команду /kick**

    /kick off
Сохраненная группа останется в настройках, но команду `/kick` бот будет игнорировать(не будет удалять участников беседы). Разрешить боту снова удалять людей из чата можно командой `/kick on`

**5. Удалить из настроек группу для команды /kick:**

    /kick group delete
Команда `/kick` будет отключена.

**6. Посмотреть свои настройки для команды /kick:**

    /kick info
Бот пришлет информацию о сохраненной группе для команды `/kick`.

***

## /newpost - получать посты выбранной группы по мере их появления.
Если включить этот режим, бот будет отправлять в чат новый пост, как только он появился на стене выбранной группы.

**1.Выбрать группу:**

    /newpost group https://vk.com/link_to_the_group
    
После команды `/newpost group` нужно подставить

* ссылку на группу
* или её ID
* или screen_name(короткое имя).

*Если группа с таким адресом не существует или является закрытой, бот об этом сообщит.
Поменять уже выбранную группу можно этой же командой.*

**2. Включить режим /newpost командой `/newpost on`:**

После того как вы выбрали группу и сохранили её в настройках, нужно дать боту разрешение присылать с её стены новые посты. Делается это командой

    /newpost on
**3.Отключить режим /newpost:**

    /newpost off
Сохраненная группа останется в настройках, но обновления присылаться не будут. Разрешить боту снова присылать посты можно командой `/newpost on`

**4. Удалить из настроек группу для режима/newpost:**

    /newpost group delete
Режим /newpost будет отключен.

**5. Посмотреть свои настройки для режима /newpost:**

    /newpost info
Бот пришлет информацию о сохраненной группе для режима /newpost.
***

## /interval - разрешить боту присылать рандомные сообщения через определенное число сообщений других участников беседы.
В режиме /interval бот будет присылать случайные сообщения в чат. Сообщения нужно предварительно сохранить в настройках с помощью команды `/phrase` (см.ниже).

**1.Установить интервал между сообщениями бота:**

    /interval 5
Бот будет отправлять сообщения через определенный интервал, т.е. после определенного количества сообщений других участников чата.
Установить интервал можно командой `/interval`, указав после нее нужное количество сообщений, например `/interval 5`.
Это значит, что бот будет присылать случайную фразу (из сохраненных) через каждые 5 сообщений других участников чата.

**2. Включить режим /interval:**

    /interval on
После того как вы выбрали интервал и сохранили его в настройках, нужно дать боту разрешение присылать случайные фразы. *Если у вас не сохранено ни одной фразы, режим интервал работать не будет. Как сохранить фразы, см. ниже.*

**3. Отключить режим /interval:**

    /interval off
Бот перестанет присылать случайные фразы.

**4.Посмотреть свои настройки для команды /interval:**

    /interval info
***    
## /phrase - управлять фразами для режима /interval

**1.Сохранить фразу:**

    /phrase add Первая фраза | Вторая фраза | Третья фраза
    /phrase add Просто фраза
    
Командой `/phrase add` можно сохранять как одну фразу, так и несколько - в этом случае разделяйте фразы вертикальными чертами, как в примере выше.

**2. Получить информацию о сохраненных фразах:**

    /phrase info
Бот пришлёт все ваши сохраненные фразы и их ID.

**3. Удалить фразу**

Если вы больше не хотите, чтобы какую-либо из ваших фраз бот присылал в режиме /interval, нужно написать команду `/phrase remove` и указать ID этой фразы.

    /phrase remove 5
    /phrase remove 222
*ID фразы можно узнать командой `/phrase info.`*

**4. Удалить все фразы:**

    /phrase remove all
Все сохраненные фразы удалятся, режим /interval будет отключен.
***

## /smart - разрешить боту отвечать на определенные фразы.

**1.Сохранить smart-сообщение**

После команды `/smart add` пишем сообщение-триггер, на которое будет реагировать бот, ставим разделитель - две вертикальные черты, далее пишем ответ, который будет отправлять бот.
Максимальная длина сообщения-триггера - 100 знаков.
Максимальная длина сообщения-ответа - 100 знаков.

Примеры:

    /smart add Входящее сообщение || Ответ бота
    /smart add доброе утро || Утро не бывает добрым((
    /smart add Привет! || и тебе привет!
Если сохранить такие смарт-сообщения и включить режим /smart, то в ответ на сообщение какого-нибудь участника чата `«доброе утро»` бот ответит `Утро не бывает добрым((`. *Для сообщений-триггеров регистр не учитывается.* Это значит, что бот ответит `и тебе привет` как на сообщение `Привет!`, так и на сообщение `привет!`

**1.1.Чтобы бот ответил на сообщение-триггер по имени**, нужно написать @имя@ в сообщении-ответе. Пример:

    /smart add Привет! || Привет, @имя@
В этом случае, если сообщение `Привет!` написал Иван Иванов, бот ответит `Привет, Иван`

**1.2.Бот знает регулярные выражения.**

Чтобы сообщить боту, что вы хотите использовать язык регулярных выражений, воспользуйтесь командой `/smart add regex`. Пример:

    /smart add regex \bОлег[ауе] || Я знаю Олега!.
В этом случае бот ответит фразой `Я знаю Олега!` на входящие сообщения

    дай Олегу печеньку
    Олега не было
    об Олеге
    Олегу
 и не ответит на сообщения

    дай олегу печеньку
    Олег
    Олежка дурачок
    
**Для регулярных выражений регистр учитывается.**

**2.Включить режим /smart:**

    /smart on
Включить режим можно, только если вы у вас есть сохраненные smart-сообщения (см. команду `/smart add` ).

**3. Отключить режим /smart:**

    /smart off
**4. Информация о режиме /smart и сохраненных smart-сообщениях:**

    /smart info
Бот пришлёт все ваши сохраненные smart-сообщения и их ID.

**5. Удалить smart-сообщение:**

Если вы больше не хотите, чтобы бот отвечал на какое-либо входящее сообщение, нужно написать команду `/smart remove` и указать ID этого smart-сообщения.
ID smart-сообщения можно узнать командой `/smart info`.

Пример:
     
    /smart remove 22
    /smart remove 124
**6. Удалить все smart-сообщения:**

    /smart remove all
Все сохраненные smart-сообщения удалятся, режим /smart будет отключен.
***

**Все команды, кроме команд /reg, доступны для владельца беседы в личной переписке с ботом.
Чтобы воспользоваться командой в личке, нужно вторым словом в сообщении указать ID вашего чата, например:**

    /post 200000003
    /kick 200000003 on
    /newpost 200000003 group https://vk.com/link_to_the_group
    /phrase 200000003 add Первая фраза | Вторая фраза | Третья фраза

